import {useAuthUser} from 'react-auth-kit'
import { Link } from 'react-router-dom';
import React, { useEffect, useState } from 'react'
import { user_vector, userRecommendationVector } from '../App'
import { NavBar } from '../components/NavBar';
import { v4 as uuidv4 } from 'uuid';
import { ArticlesContainer } from '../components/ArticlesContainer';

export function Dashboard () {
    const auth = useAuthUser()
    const user = auth()

    console.log("User vector", user_vector.value)

    const [ nutrientData, setNutrientData ] = useState({
        microNutrients: [
        {
            name: "Vitamin C",
            percentage: 65
        },
        {
            name: "Vitamin B",
            percentage: 45
        },
        {
            name: "Vitamin D",
            percentage: 100
        },
        {
            name: "Potassium",
            percentage: 89
        },
        {
            name: "Vitamin A",
            percentage: 67
        },
        {
            name: "Thiamin",
            percentage: 23
        },
        ],
        macroNutrients: [
            {
                name: "Protein",
                percentage: 20
            },
            {
                name: "Fats",
                percentage: 30
            },
            {
                name: "Carbohydrates",
                percentage: 45
            }
        ],
        remainingCalories: 1100
    })

    // useEffect(() => {
    //     let newDict = []
    //     for (let key in user_vector.value) {
    //         newDict.push({
    //             name: key.charAt(0).toUpperCase() + key.slice(1),
    //             percentage: parseInt(Math.abs((user_vector.value[key] / userRecommendationVector[key] * 100) -100)) 
    //         })
    //     }
    //     setNutrientData((currentData) => {
    //         return {
    //             ...currentData,
    //             microNutrients: newDict
    //         }
    //     })
    //     console.log("Changed these values", newDict)
    // }, [user_vector.value])

    const [ loading, setLoading ] = useState(true)
    const [ foodRecommendations, setFoodRecommendations ] = useState(() => {
        fetchRecommendations({user_vector: user_vector.value})
        .then(data => {
            if (data.msg) {
                setLoading(false)
                setFoodRecommendations(data.recommendations)
            }
            else {
                console.log("BACKEND ISSUE")
            }
        })
    })

    useEffect(() => {
        fetchStats()
        .then(data => {
            if (data.msg) {
                setNutrientData(data.nutrient_stats)
            }
        })
    }, [])


    async function fetchRecommendations (dataToSend) {
        const response = await fetch(window.location.origin+'/api/get-food-recommendations', {
            method: "GET",
            credentials: "same-origin",
            headers: {
                "Content-Type": "application/json"
            }
        });
        const data = await response.json();
        return data;
    }

    async function fetchStats (dataToSend) {
        const response = await fetch(window.location.origin+'/api/get-nutrient-coverage', {
            method: "GET",
            credentials: "same-origin",
            headers: {
                "Content-Type": "application/json"
            }
        });
        const data = await response.json();
        return data;
    }

    if (loading) {
        return <>
            <div className="content-container">
                <h1>Hey {user.name}</h1>
                <div className="shadow-box">
                    <div className="emoji-text">
                        <svg width="26" height="29" viewBox="0 0 26 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.4465 19.1863C21.76 19.0762 22.976 18.4489 23.827 17.4423C24.678 16.4357 25.0943 15.1323 24.9843 13.8187C24.8742 12.5052 24.2469 11.2892 23.2403 10.4382C22.2337 9.58717 20.9303 9.17089 19.6167 9.28093C18.3032 9.39096 17.0872 10.0183 16.2362 11.0249C15.3852 12.0315 14.9689 13.3349 15.0789 14.6485C15.189 15.962 15.8163 17.178 16.8229 18.029C17.8295 18.88 19.133 19.2963 20.4465 19.1863ZM18.362 12.8149C18.5262 12.8011 18.6891 12.8532 18.8149 12.9595C18.9408 13.0659 19.0192 13.2179 19.0329 13.3821C19.0467 13.5463 18.9947 13.7092 18.8883 13.8351C18.7819 13.9609 18.6299 14.0393 18.4657 14.0531C18.3015 14.0668 18.1386 14.0148 18.0128 13.9084C17.8869 13.802 17.8085 13.65 17.7948 13.4858C17.781 13.3216 17.833 13.1587 17.9394 13.0329C18.0458 12.9071 18.1978 12.8286 18.362 12.8149ZM20.8902 13.2265C20.8764 13.0623 20.9285 12.8994 21.0348 12.7736C21.1412 12.6478 21.2932 12.5693 21.4574 12.5556C21.6216 12.5418 21.7845 12.5939 21.9104 12.7002C22.0362 12.8066 22.1146 12.9586 22.1284 13.1228C22.1421 13.287 22.0901 13.4499 21.9837 13.5758C21.8773 13.7016 21.7253 13.78 21.5611 13.7938C21.3969 13.8075 21.234 13.7555 21.1082 13.6491C20.9824 13.5427 20.9039 13.3907 20.8902 13.2265ZM18.304 15.9369L22.0185 15.6257C22.1888 15.6115 22.3397 15.7391 22.354 15.9093C22.3682 16.0796 22.2406 16.2306 22.0704 16.2448L18.3559 16.556C18.1856 16.5702 18.0347 16.4426 18.0204 16.2724C18.0061 16.1021 18.1338 15.9511 18.304 15.9369Z" fill="#DA9759"/>
                            <path d="M12.8992 27.9211C14.3007 27.6477 15.5363 26.8287 16.334 25.6443C17.1317 24.46 17.4262 23.0072 17.1528 21.6056C16.8794 20.2041 16.0604 18.9685 14.876 18.1708C13.6916 17.3731 12.2389 17.0786 10.8373 17.352C9.43575 17.6254 8.20021 18.4444 7.4025 19.6288C6.60479 20.8132 6.31025 22.2659 6.58367 23.6675C6.85709 25.0691 7.67608 26.3046 8.86046 27.1023C10.0448 27.9 11.4976 28.1946 12.8992 27.9211ZM10.2763 24.505C10.6419 23.9622 11.2251 23.4477 11.9971 23.2971C12.7691 23.1465 13.503 23.4041 14.0457 23.7696C14.3195 23.9541 14.5548 24.1717 14.7332 24.3941C14.9083 24.6106 15.0441 24.8563 15.0904 25.0937C15.1114 25.201 15.0778 25.3147 15.0011 25.3939C14.9245 25.4732 14.8137 25.5098 14.7049 25.4903L14.2508 25.4139C13.6548 25.3137 13.0435 25.3216 12.4489 25.4375L12.3829 25.4504C11.7884 25.5664 11.221 25.7885 10.7043 26.1058L10.3121 26.3473C10.2182 26.4041 10.1023 26.4139 10.0014 26.3693C9.9006 26.3247 9.8272 26.234 9.80585 26.1246C9.75914 25.8851 9.7951 25.6081 9.8739 25.342C9.95563 25.069 10.0919 24.7788 10.2763 24.505ZM8.89933 20.8736L10.948 21.5004C11.1918 21.575 11.2539 21.8929 11.0559 22.0536L9.39305 23.4044C9.24688 23.5229 9.02576 23.4439 8.98951 23.2582C8.97824 23.2004 8.98801 23.1406 9.01671 23.09L9.58588 22.0533L8.66877 21.3065C8.62315 21.2704 8.59164 21.2186 8.58036 21.1608C8.54412 20.9751 8.71933 20.8187 8.89933 20.8736ZM14.36 20.0312C14.3712 20.089 14.3615 20.1488 14.3328 20.1994L13.7636 21.2361L14.6807 21.9829C14.7263 22.019 14.7578 22.0707 14.7691 22.1285C14.8053 22.3143 14.6301 22.4706 14.4501 22.4157L12.4015 21.789C12.1576 21.7144 12.0956 21.3965 12.2935 21.2357L13.9564 19.8849C14.1026 19.7664 14.3237 19.8454 14.36 20.0312Z" fill="#DA9759"/>
                            <path d="M7.71083 16.9914C9.75596 17.4075 11.8826 16.9942 13.623 15.8423C15.3634 14.6904 16.5749 12.8944 16.991 10.8492C17.4072 8.80411 16.9938 6.67743 15.842 4.93705C14.6901 3.19667 12.894 1.98516 10.8489 1.56903C8.80375 1.1529 6.67707 1.56623 4.93669 2.71811C3.19631 3.86999 1.9848 5.66605 1.56867 7.71119C1.15254 9.75632 1.56587 11.883 2.71775 13.6234C3.86963 15.3638 5.66569 16.5753 7.71083 16.9914ZM6.08569 10.8104C6.498 11.5437 7.28612 12.3879 8.5934 12.6539C9.90069 12.9199 10.956 12.4507 11.6221 11.9369C11.8379 11.7707 12.1464 11.8115 12.3126 12.0273C12.4789 12.243 12.4381 12.5515 12.2223 12.7178C11.3937 13.3523 10.057 13.9555 8.39728 13.6178C6.73756 13.28 5.74285 12.2025 5.22803 11.2947C5.09439 11.0573 5.17738 10.7574 5.41475 10.6237C5.65211 10.4901 5.95205 10.5731 6.08569 10.8104ZM8.28989 8.22555L8.28509 8.2183C8.28029 8.21105 8.2761 8.20078 8.26952 8.1869C8.25635 8.15912 8.23358 8.11685 8.20601 8.06732C8.14787 7.96766 8.06574 7.83174 7.9619 7.69455C7.74464 7.40566 7.48142 7.15762 7.21333 7.10307C6.94525 7.04852 6.60603 7.17399 6.29315 7.355C6.14396 7.44071 6.01525 7.53372 5.92278 7.60274C5.87805 7.63756 5.84058 7.66757 5.8176 7.68799C5.80611 7.6982 5.79524 7.7054 5.791 7.71081L5.78375 7.71561C5.70333 7.78708 5.58815 7.79815 5.4985 7.7454C5.40886 7.69266 5.35796 7.5882 5.37941 7.48277C5.48912 6.94359 5.79942 6.4515 6.17853 6.11457C6.5534 5.78305 7.04064 5.56222 7.50753 5.65722C7.97441 5.75222 8.33662 6.14588 8.55213 6.59753C8.76943 7.05582 8.86277 7.63004 8.75306 8.16922C8.73222 8.27163 8.64695 8.35153 8.54081 8.36443C8.43466 8.37734 8.33297 8.32214 8.28989 8.22555ZM13.1094 9.20619L13.1046 9.19894C13.0998 9.19169 13.0956 9.18142 13.089 9.16754C13.0758 9.13976 13.0531 9.09749 13.0255 9.04796C12.9674 8.9483 12.8852 8.81238 12.7814 8.67519C12.5641 8.38631 12.3009 8.13826 12.0328 8.08371C11.7647 8.02916 11.4255 8.15463 11.1126 8.33564C10.9635 8.42135 10.8347 8.51436 10.7423 8.58338C10.6975 8.6182 10.6601 8.64822 10.6371 8.66864C10.6256 8.67885 10.6147 8.68604 10.6105 8.69146L10.6032 8.69625C10.5228 8.76772 10.4076 8.77879 10.318 8.72605C10.2283 8.6733 10.1775 8.56884 10.1989 8.46341C10.3086 7.92423 10.6189 7.43214 10.998 7.09521C11.3729 6.76369 11.8601 6.54287 12.327 6.63786C12.7939 6.73286 13.1561 7.12653 13.3716 7.57817C13.5889 8.03646 13.6823 8.61068 13.5725 9.14986C13.5517 9.25227 13.4664 9.33217 13.3603 9.34508C13.2542 9.35799 13.1525 9.30279 13.1094 9.20619Z" fill="#50B04E"/>
                        </svg>
                        <span>How have you felt today?</span>
                    </div>
                </div>
                <Link to="/track-foods">
                    <div className="shadow-box">
                        <div className="emoji-text">
                            <svg width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16.8906 3C16.6049 3 16.375 3.22988 16.375 3.51562C16.375 4.35137 16.8777 4.7918 17.215 5.08613L17.2387 5.10762C17.5889 5.4127 17.75 5.57598 17.75 5.92188C17.75 6.20762 17.9799 6.4375 18.2656 6.4375C18.5514 6.4375 18.7812 6.20762 18.7812 5.92188C18.7812 5.08613 18.2785 4.6457 17.9412 4.35137L17.9176 4.32988C17.5674 4.0248 17.4062 3.86152 17.4062 3.51562C17.4062 3.22988 17.1764 3 16.8906 3ZM15.6875 7.125C15.3072 7.125 15 7.43223 15 7.8125V11.9375C15 13.0762 15.9238 14 17.0625 14H21.1875C22.3262 14 23.25 13.0762 23.25 11.9375H23.5938C24.9236 11.9375 26 10.8611 26 9.53125C26 8.20137 24.9236 7.125 23.5938 7.125H22.5625H15.6875ZM23.25 8.5H23.5938C24.1631 8.5 24.625 8.96191 24.625 9.53125C24.625 10.1006 24.1631 10.5625 23.5938 10.5625H23.25V8.5ZM19.8125 3.51562C19.8125 3.22988 19.5826 3 19.2969 3C19.0111 3 18.7812 3.22988 18.7812 3.51562C18.7812 4.35137 19.284 4.7918 19.6213 5.08613L19.6449 5.10762C19.9951 5.4127 20.1562 5.57598 20.1562 5.92188C20.1562 6.20762 20.3861 6.4375 20.6719 6.4375C20.9576 6.4375 21.1875 6.20762 21.1875 5.92188C21.1875 5.08613 20.6848 4.6457 20.3475 4.35137L20.3238 4.32988C19.9736 4.0248 19.8125 3.86152 19.8125 3.51562Z" fill="#DA9759"/>
                                <path d="M9.03354 18.2857C8.66458 18.2857 8.36667 17.9955 8.36667 17.6361C8.36667 17.5937 8.37125 17.5535 8.38042 17.5111C8.50187 17.0424 9.43917 14 13.5 14C17.5608 14 18.4981 17.0424 18.6196 17.5111C18.631 17.5535 18.6333 17.5937 18.6333 17.6361C18.6333 17.9955 18.3354 18.2857 17.9665 18.2857H9.03354ZM10.9333 16.1428C10.9333 16.0481 10.8947 15.9573 10.8259 15.8903C10.7572 15.8233 10.6639 15.7857 10.5667 15.7857C10.4694 15.7857 10.3762 15.8233 10.3074 15.8903C10.2386 15.9573 10.2 16.0481 10.2 16.1428C10.2 16.2375 10.2386 16.3284 10.3074 16.3954C10.3762 16.4623 10.4694 16.5 10.5667 16.5C10.6639 16.5 10.7572 16.4623 10.8259 16.3954C10.8947 16.3284 10.9333 16.2375 10.9333 16.1428ZM16.4333 16.5C16.5306 16.5 16.6238 16.4623 16.6926 16.3954C16.7614 16.3284 16.8 16.2375 16.8 16.1428C16.8 16.0481 16.7614 15.9573 16.6926 15.8903C16.6238 15.8233 16.5306 15.7857 16.4333 15.7857C16.3361 15.7857 16.2428 15.8233 16.1741 15.8903C16.1053 15.9573 16.0667 16.0481 16.0667 16.1428C16.0667 16.2375 16.1053 16.3284 16.1741 16.3954C16.2428 16.4623 16.3361 16.5 16.4333 16.5ZM13.8667 15.4285C13.8667 15.3338 13.828 15.243 13.7593 15.176C13.6905 15.109 13.5972 15.0714 13.5 15.0714C13.4028 15.0714 13.3095 15.109 13.2407 15.176C13.172 15.243 13.1333 15.3338 13.1333 15.4285C13.1333 15.5233 13.172 15.6141 13.2407 15.6811C13.3095 15.7481 13.4028 15.7857 13.5 15.7857C13.5972 15.7857 13.6905 15.7481 13.7593 15.6811C13.828 15.6141 13.8667 15.5233 13.8667 15.4285ZM8 20.0714C8 19.4799 8.49271 19 9.1 19H17.9C18.5073 19 19 19.4799 19 20.0714C19 20.6629 18.5073 21.1428 17.9 21.1428H9.1C8.49271 21.1428 8 20.6629 8 20.0714ZM8.36667 22.2143C8.36667 22.0178 8.53167 21.8571 8.73333 21.8571H18.2667C18.4683 21.8571 18.6333 22.0178 18.6333 22.2143V22.5714C18.6333 23.3593 17.9756 24 17.1667 24H9.83333C9.02438 24 8.36667 23.3593 8.36667 22.5714V22.2143Z" fill="#DA9759"/>
                                <path d="M10.2267 0.1871C9.83338 0.28064 7.26555 1.71553 8.1004 5.22605L8.74972 7.95645C8.95437 8.81701 9.82631 9.34889 10.6941 9.14252L11.4808 8.95544L12.2229 12.0759C12.3255 12.5074 12.7599 12.7724 13.195 12.6689C13.6302 12.5655 13.8988 12.1332 13.7962 11.7017L13.0541 8.58128L12.4048 5.85088L11.1989 0.780134C11.0963 0.348634 10.6618 0.0836213 10.2267 0.1871ZM1.6661 2.63504C1.61856 2.43513 1.42918 2.30502 1.22238 2.33102C1.01557 2.35702 0.867422 2.53134 0.868973 2.73445L0.914298 6.2344C0.916406 6.39617 0.936302 6.55628 0.973406 6.7123C1.23951 7.83128 2.32096 8.54515 3.44852 8.38261L4.74949 13.8532C4.85211 14.2847 5.28656 14.5497 5.72168 14.4462C6.15681 14.3427 6.42545 13.9105 6.32283 13.479L5.02186 8.00845C6.10189 7.646 6.7462 6.52172 6.4801 5.40274C6.44299 5.24672 6.38868 5.09479 6.31774 4.94939L4.78266 1.80373C4.69203 1.61923 4.47692 1.53387 4.28301 1.60316C4.08911 1.67246 3.97857 1.87389 4.02611 2.0738L4.80414 5.3454C4.83545 5.47705 4.75279 5.61004 4.62004 5.64161C4.49466 5.67142 4.3688 5.6009 4.32694 5.47949L3.22887 2.22733C3.16354 2.02908 2.95739 1.91584 2.75335 1.96436C2.5493 2.01288 2.4162 2.20681 2.44711 2.41324L2.93306 5.81097C2.95034 5.93823 2.8697 6.05786 2.74432 6.08768C2.61157 6.11924 2.47789 6.0377 2.44659 5.90606L1.66856 2.63445L1.6661 2.63504ZM3.73471 6.05821L3.72733 6.05996L3.71996 6.06172L3.72327 6.0429L3.73471 6.05821Z" fill="#50B04E"/>
                            </svg>
                            <span>What have you eaten today?</span>
                        </div>
                    </div>
                </Link>
                <div className="shadow-box" style={{display:"flex",flexDirection:"row",gap:"1rem"}}>
                    <div className="loading-container">
                        <div className="loading-circle"></div>
                    </div>
                    <span>Loading statistics on micro- and macronutrients</span>
                </div>
                <div className="shadow-box recipe-box">
                    <div className="recipe-header">
                        <h3>Recommendations for your taste</h3>
                    </div>
                    <p>Based on your food preferences, we have put together a collection of recipes for you today</p>
                    <p>Check them out now {">>>"}</p>
                </div>
                <ArticlesContainer />
            </div>
            <NavBar />
        </>
    }
    else {
        return <>
            <div className="content-container">
                <h1>Hey {user.name}</h1>
                <div className="shadow-box">
                    <div className="emoji-text">
                        <svg width="26" height="29" viewBox="0 0 26 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.4465 19.1863C21.76 19.0762 22.976 18.4489 23.827 17.4423C24.678 16.4357 25.0943 15.1323 24.9843 13.8187C24.8742 12.5052 24.2469 11.2892 23.2403 10.4382C22.2337 9.58717 20.9303 9.17089 19.6167 9.28093C18.3032 9.39096 17.0872 10.0183 16.2362 11.0249C15.3852 12.0315 14.9689 13.3349 15.0789 14.6485C15.189 15.962 15.8163 17.178 16.8229 18.029C17.8295 18.88 19.133 19.2963 20.4465 19.1863ZM18.362 12.8149C18.5262 12.8011 18.6891 12.8532 18.8149 12.9595C18.9408 13.0659 19.0192 13.2179 19.0329 13.3821C19.0467 13.5463 18.9947 13.7092 18.8883 13.8351C18.7819 13.9609 18.6299 14.0393 18.4657 14.0531C18.3015 14.0668 18.1386 14.0148 18.0128 13.9084C17.8869 13.802 17.8085 13.65 17.7948 13.4858C17.781 13.3216 17.833 13.1587 17.9394 13.0329C18.0458 12.9071 18.1978 12.8286 18.362 12.8149ZM20.8902 13.2265C20.8764 13.0623 20.9285 12.8994 21.0348 12.7736C21.1412 12.6478 21.2932 12.5693 21.4574 12.5556C21.6216 12.5418 21.7845 12.5939 21.9104 12.7002C22.0362 12.8066 22.1146 12.9586 22.1284 13.1228C22.1421 13.287 22.0901 13.4499 21.9837 13.5758C21.8773 13.7016 21.7253 13.78 21.5611 13.7938C21.3969 13.8075 21.234 13.7555 21.1082 13.6491C20.9824 13.5427 20.9039 13.3907 20.8902 13.2265ZM18.304 15.9369L22.0185 15.6257C22.1888 15.6115 22.3397 15.7391 22.354 15.9093C22.3682 16.0796 22.2406 16.2306 22.0704 16.2448L18.3559 16.556C18.1856 16.5702 18.0347 16.4426 18.0204 16.2724C18.0061 16.1021 18.1338 15.9511 18.304 15.9369Z" fill="#DA9759"/>
                            <path d="M12.8992 27.9211C14.3007 27.6477 15.5363 26.8287 16.334 25.6443C17.1317 24.46 17.4262 23.0072 17.1528 21.6056C16.8794 20.2041 16.0604 18.9685 14.876 18.1708C13.6916 17.3731 12.2389 17.0786 10.8373 17.352C9.43575 17.6254 8.20021 18.4444 7.4025 19.6288C6.60479 20.8132 6.31025 22.2659 6.58367 23.6675C6.85709 25.0691 7.67608 26.3046 8.86046 27.1023C10.0448 27.9 11.4976 28.1946 12.8992 27.9211ZM10.2763 24.505C10.6419 23.9622 11.2251 23.4477 11.9971 23.2971C12.7691 23.1465 13.503 23.4041 14.0457 23.7696C14.3195 23.9541 14.5548 24.1717 14.7332 24.3941C14.9083 24.6106 15.0441 24.8563 15.0904 25.0937C15.1114 25.201 15.0778 25.3147 15.0011 25.3939C14.9245 25.4732 14.8137 25.5098 14.7049 25.4903L14.2508 25.4139C13.6548 25.3137 13.0435 25.3216 12.4489 25.4375L12.3829 25.4504C11.7884 25.5664 11.221 25.7885 10.7043 26.1058L10.3121 26.3473C10.2182 26.4041 10.1023 26.4139 10.0014 26.3693C9.9006 26.3247 9.8272 26.234 9.80585 26.1246C9.75914 25.8851 9.7951 25.6081 9.8739 25.342C9.95563 25.069 10.0919 24.7788 10.2763 24.505ZM8.89933 20.8736L10.948 21.5004C11.1918 21.575 11.2539 21.8929 11.0559 22.0536L9.39305 23.4044C9.24688 23.5229 9.02576 23.4439 8.98951 23.2582C8.97824 23.2004 8.98801 23.1406 9.01671 23.09L9.58588 22.0533L8.66877 21.3065C8.62315 21.2704 8.59164 21.2186 8.58036 21.1608C8.54412 20.9751 8.71933 20.8187 8.89933 20.8736ZM14.36 20.0312C14.3712 20.089 14.3615 20.1488 14.3328 20.1994L13.7636 21.2361L14.6807 21.9829C14.7263 22.019 14.7578 22.0707 14.7691 22.1285C14.8053 22.3143 14.6301 22.4706 14.4501 22.4157L12.4015 21.789C12.1576 21.7144 12.0956 21.3965 12.2935 21.2357L13.9564 19.8849C14.1026 19.7664 14.3237 19.8454 14.36 20.0312Z" fill="#DA9759"/>
                            <path d="M7.71083 16.9914C9.75596 17.4075 11.8826 16.9942 13.623 15.8423C15.3634 14.6904 16.5749 12.8944 16.991 10.8492C17.4072 8.80411 16.9938 6.67743 15.842 4.93705C14.6901 3.19667 12.894 1.98516 10.8489 1.56903C8.80375 1.1529 6.67707 1.56623 4.93669 2.71811C3.19631 3.86999 1.9848 5.66605 1.56867 7.71119C1.15254 9.75632 1.56587 11.883 2.71775 13.6234C3.86963 15.3638 5.66569 16.5753 7.71083 16.9914ZM6.08569 10.8104C6.498 11.5437 7.28612 12.3879 8.5934 12.6539C9.90069 12.9199 10.956 12.4507 11.6221 11.9369C11.8379 11.7707 12.1464 11.8115 12.3126 12.0273C12.4789 12.243 12.4381 12.5515 12.2223 12.7178C11.3937 13.3523 10.057 13.9555 8.39728 13.6178C6.73756 13.28 5.74285 12.2025 5.22803 11.2947C5.09439 11.0573 5.17738 10.7574 5.41475 10.6237C5.65211 10.4901 5.95205 10.5731 6.08569 10.8104ZM8.28989 8.22555L8.28509 8.2183C8.28029 8.21105 8.2761 8.20078 8.26952 8.1869C8.25635 8.15912 8.23358 8.11685 8.20601 8.06732C8.14787 7.96766 8.06574 7.83174 7.9619 7.69455C7.74464 7.40566 7.48142 7.15762 7.21333 7.10307C6.94525 7.04852 6.60603 7.17399 6.29315 7.355C6.14396 7.44071 6.01525 7.53372 5.92278 7.60274C5.87805 7.63756 5.84058 7.66757 5.8176 7.68799C5.80611 7.6982 5.79524 7.7054 5.791 7.71081L5.78375 7.71561C5.70333 7.78708 5.58815 7.79815 5.4985 7.7454C5.40886 7.69266 5.35796 7.5882 5.37941 7.48277C5.48912 6.94359 5.79942 6.4515 6.17853 6.11457C6.5534 5.78305 7.04064 5.56222 7.50753 5.65722C7.97441 5.75222 8.33662 6.14588 8.55213 6.59753C8.76943 7.05582 8.86277 7.63004 8.75306 8.16922C8.73222 8.27163 8.64695 8.35153 8.54081 8.36443C8.43466 8.37734 8.33297 8.32214 8.28989 8.22555ZM13.1094 9.20619L13.1046 9.19894C13.0998 9.19169 13.0956 9.18142 13.089 9.16754C13.0758 9.13976 13.0531 9.09749 13.0255 9.04796C12.9674 8.9483 12.8852 8.81238 12.7814 8.67519C12.5641 8.38631 12.3009 8.13826 12.0328 8.08371C11.7647 8.02916 11.4255 8.15463 11.1126 8.33564C10.9635 8.42135 10.8347 8.51436 10.7423 8.58338C10.6975 8.6182 10.6601 8.64822 10.6371 8.66864C10.6256 8.67885 10.6147 8.68604 10.6105 8.69146L10.6032 8.69625C10.5228 8.76772 10.4076 8.77879 10.318 8.72605C10.2283 8.6733 10.1775 8.56884 10.1989 8.46341C10.3086 7.92423 10.6189 7.43214 10.998 7.09521C11.3729 6.76369 11.8601 6.54287 12.327 6.63786C12.7939 6.73286 13.1561 7.12653 13.3716 7.57817C13.5889 8.03646 13.6823 8.61068 13.5725 9.14986C13.5517 9.25227 13.4664 9.33217 13.3603 9.34508C13.2542 9.35799 13.1525 9.30279 13.1094 9.20619Z" fill="#50B04E"/>
                        </svg>
                        <span>How have you felt today?</span>
                    </div>
                </div>

                <Link to="/track-foods">
                    <div className="shadow-box">
                        <div className="emoji-text">
                            <svg width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16.8906 3C16.6049 3 16.375 3.22988 16.375 3.51562C16.375 4.35137 16.8777 4.7918 17.215 5.08613L17.2387 5.10762C17.5889 5.4127 17.75 5.57598 17.75 5.92188C17.75 6.20762 17.9799 6.4375 18.2656 6.4375C18.5514 6.4375 18.7812 6.20762 18.7812 5.92188C18.7812 5.08613 18.2785 4.6457 17.9412 4.35137L17.9176 4.32988C17.5674 4.0248 17.4062 3.86152 17.4062 3.51562C17.4062 3.22988 17.1764 3 16.8906 3ZM15.6875 7.125C15.3072 7.125 15 7.43223 15 7.8125V11.9375C15 13.0762 15.9238 14 17.0625 14H21.1875C22.3262 14 23.25 13.0762 23.25 11.9375H23.5938C24.9236 11.9375 26 10.8611 26 9.53125C26 8.20137 24.9236 7.125 23.5938 7.125H22.5625H15.6875ZM23.25 8.5H23.5938C24.1631 8.5 24.625 8.96191 24.625 9.53125C24.625 10.1006 24.1631 10.5625 23.5938 10.5625H23.25V8.5ZM19.8125 3.51562C19.8125 3.22988 19.5826 3 19.2969 3C19.0111 3 18.7812 3.22988 18.7812 3.51562C18.7812 4.35137 19.284 4.7918 19.6213 5.08613L19.6449 5.10762C19.9951 5.4127 20.1562 5.57598 20.1562 5.92188C20.1562 6.20762 20.3861 6.4375 20.6719 6.4375C20.9576 6.4375 21.1875 6.20762 21.1875 5.92188C21.1875 5.08613 20.6848 4.6457 20.3475 4.35137L20.3238 4.32988C19.9736 4.0248 19.8125 3.86152 19.8125 3.51562Z" fill="#DA9759"/>
                                <path d="M9.03354 18.2857C8.66458 18.2857 8.36667 17.9955 8.36667 17.6361C8.36667 17.5937 8.37125 17.5535 8.38042 17.5111C8.50187 17.0424 9.43917 14 13.5 14C17.5608 14 18.4981 17.0424 18.6196 17.5111C18.631 17.5535 18.6333 17.5937 18.6333 17.6361C18.6333 17.9955 18.3354 18.2857 17.9665 18.2857H9.03354ZM10.9333 16.1428C10.9333 16.0481 10.8947 15.9573 10.8259 15.8903C10.7572 15.8233 10.6639 15.7857 10.5667 15.7857C10.4694 15.7857 10.3762 15.8233 10.3074 15.8903C10.2386 15.9573 10.2 16.0481 10.2 16.1428C10.2 16.2375 10.2386 16.3284 10.3074 16.3954C10.3762 16.4623 10.4694 16.5 10.5667 16.5C10.6639 16.5 10.7572 16.4623 10.8259 16.3954C10.8947 16.3284 10.9333 16.2375 10.9333 16.1428ZM16.4333 16.5C16.5306 16.5 16.6238 16.4623 16.6926 16.3954C16.7614 16.3284 16.8 16.2375 16.8 16.1428C16.8 16.0481 16.7614 15.9573 16.6926 15.8903C16.6238 15.8233 16.5306 15.7857 16.4333 15.7857C16.3361 15.7857 16.2428 15.8233 16.1741 15.8903C16.1053 15.9573 16.0667 16.0481 16.0667 16.1428C16.0667 16.2375 16.1053 16.3284 16.1741 16.3954C16.2428 16.4623 16.3361 16.5 16.4333 16.5ZM13.8667 15.4285C13.8667 15.3338 13.828 15.243 13.7593 15.176C13.6905 15.109 13.5972 15.0714 13.5 15.0714C13.4028 15.0714 13.3095 15.109 13.2407 15.176C13.172 15.243 13.1333 15.3338 13.1333 15.4285C13.1333 15.5233 13.172 15.6141 13.2407 15.6811C13.3095 15.7481 13.4028 15.7857 13.5 15.7857C13.5972 15.7857 13.6905 15.7481 13.7593 15.6811C13.828 15.6141 13.8667 15.5233 13.8667 15.4285ZM8 20.0714C8 19.4799 8.49271 19 9.1 19H17.9C18.5073 19 19 19.4799 19 20.0714C19 20.6629 18.5073 21.1428 17.9 21.1428H9.1C8.49271 21.1428 8 20.6629 8 20.0714ZM8.36667 22.2143C8.36667 22.0178 8.53167 21.8571 8.73333 21.8571H18.2667C18.4683 21.8571 18.6333 22.0178 18.6333 22.2143V22.5714C18.6333 23.3593 17.9756 24 17.1667 24H9.83333C9.02438 24 8.36667 23.3593 8.36667 22.5714V22.2143Z" fill="#DA9759"/>
                                <path d="M10.2267 0.1871C9.83338 0.28064 7.26555 1.71553 8.1004 5.22605L8.74972 7.95645C8.95437 8.81701 9.82631 9.34889 10.6941 9.14252L11.4808 8.95544L12.2229 12.0759C12.3255 12.5074 12.7599 12.7724 13.195 12.6689C13.6302 12.5655 13.8988 12.1332 13.7962 11.7017L13.0541 8.58128L12.4048 5.85088L11.1989 0.780134C11.0963 0.348634 10.6618 0.0836213 10.2267 0.1871ZM1.6661 2.63504C1.61856 2.43513 1.42918 2.30502 1.22238 2.33102C1.01557 2.35702 0.867422 2.53134 0.868973 2.73445L0.914298 6.2344C0.916406 6.39617 0.936302 6.55628 0.973406 6.7123C1.23951 7.83128 2.32096 8.54515 3.44852 8.38261L4.74949 13.8532C4.85211 14.2847 5.28656 14.5497 5.72168 14.4462C6.15681 14.3427 6.42545 13.9105 6.32283 13.479L5.02186 8.00845C6.10189 7.646 6.7462 6.52172 6.4801 5.40274C6.44299 5.24672 6.38868 5.09479 6.31774 4.94939L4.78266 1.80373C4.69203 1.61923 4.47692 1.53387 4.28301 1.60316C4.08911 1.67246 3.97857 1.87389 4.02611 2.0738L4.80414 5.3454C4.83545 5.47705 4.75279 5.61004 4.62004 5.64161C4.49466 5.67142 4.3688 5.6009 4.32694 5.47949L3.22887 2.22733C3.16354 2.02908 2.95739 1.91584 2.75335 1.96436C2.5493 2.01288 2.4162 2.20681 2.44711 2.41324L2.93306 5.81097C2.95034 5.93823 2.8697 6.05786 2.74432 6.08768C2.61157 6.11924 2.47789 6.0377 2.44659 5.90606L1.66856 2.63445L1.6661 2.63504ZM3.73471 6.05821L3.72733 6.05996L3.71996 6.06172L3.72327 6.0429L3.73471 6.05821Z" fill="#50B04E"/>
                            </svg>
                            <span>What have you eaten today?</span>
                        </div>
                    </div>
                </Link>

                <div className="shadow-box">
                    <div className="emoji-text">
                        <svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 12.5C0 13.0531 0.446875 13.5 1 13.5H2.70937C3.09375 14.3844 3.975 15 5 15C6.025 15 6.90625 14.3844 7.29063 13.5H15C15.5531 13.5 16 13.0531 16 12.5C16 11.9469 15.5531 11.5 15 11.5H7.29063C6.90625 10.6156 6.025 10 5 10C3.975 10 3.09375 10.6156 2.70937 11.5H1C0.446875 11.5 0 11.9469 0 12.5ZM4 12.5C4 12.2348 4.10536 11.9804 4.29289 11.7929C4.48043 11.6054 4.73478 11.5 5 11.5C5.26522 11.5 5.51957 11.6054 5.70711 11.7929C5.89464 11.9804 6 12.2348 6 12.5C6 12.7652 5.89464 13.0196 5.70711 13.2071C5.51957 13.3946 5.26522 13.5 5 13.5C4.73478 13.5 4.48043 13.3946 4.29289 13.2071C4.10536 13.0196 4 12.7652 4 12.5ZM10 7.5C10 7.23478 10.1054 6.98043 10.2929 6.79289C10.4804 6.60536 10.7348 6.5 11 6.5C11.2652 6.5 11.5196 6.60536 11.7071 6.79289C11.8946 6.98043 12 7.23478 12 7.5C12 7.76522 11.8946 8.01957 11.7071 8.20711C11.5196 8.39464 11.2652 8.5 11 8.5C10.7348 8.5 10.4804 8.39464 10.2929 8.20711C10.1054 8.01957 10 7.76522 10 7.5ZM11 5C9.975 5 9.09375 5.61563 8.70938 6.5H1C0.446875 6.5 0 6.94687 0 7.5C0 8.05313 0.446875 8.5 1 8.5H8.70938C9.09375 9.38437 9.975 10 11 10C12.025 10 12.9062 9.38437 13.2906 8.5H15C15.5531 8.5 16 8.05313 16 7.5C16 6.94687 15.5531 6.5 15 6.5H13.2906C12.9062 5.61563 12.025 5 11 5ZM6 3.5C5.73478 3.5 5.48043 3.39464 5.29289 3.20711C5.10536 3.01957 5 2.76522 5 2.5C5 2.23478 5.10536 1.98043 5.29289 1.79289C5.48043 1.60536 5.73478 1.5 6 1.5C6.26522 1.5 6.51957 1.60536 6.70711 1.79289C6.89464 1.98043 7 2.23478 7 2.5C7 2.76522 6.89464 3.01957 6.70711 3.20711C6.51957 3.39464 6.26522 3.5 6 3.5ZM8.29062 1.5C7.90625 0.615625 7.025 0 6 0C4.975 0 4.09375 0.615625 3.70937 1.5H1C0.446875 1.5 0 1.94687 0 2.5C0 3.05313 0.446875 3.5 1 3.5H3.70937C4.09375 4.38437 4.975 5 6 5C7.025 5 7.90625 4.38437 8.29062 3.5H15C15.5531 3.5 16 3.05313 16 2.5C16 1.94687 15.5531 1.5 15 1.5H8.29062Z" fill="#50B04E"/>
                        </svg>
                        <h3>Your nutrient profile</h3>
                    </div>
                    <div className="progress-bar-container">
                        <div className="progressbar">
                            <div className="progress" style={{width: `${nutrientData.totalProgress}%`}}></div>
                        </div>
                        <p className="progress-info">{nutrientData.totalProgress}% of recommended amounts consumed</p>
                    </div>
                    <h4>Micronutrient Overview</h4>
                    <div className="nutrient-overview">
                        {nutrientData.microNutrients.map((nutrient) => {
                            return <div key={uuidv4()} className="nutrient">
                                <span>{nutrient.name}</span>
                                <div className="progressbar">
                                    <div className="progress" style={{width: `${nutrient.percentage}%`, backgroundColor: (nutrient.percentage > 79) ? "#50B04E" : (nutrient.percentage < 30) ? "darkred" : "orange"}}></div>
                                </div>
                        </div>
                        })}
                    </div>
                    <h4>Macronutrient Overview</h4>
                    <div className="nutrient-overview">
                        {nutrientData.macroNutrients.map((nutrient) => {
                            return <div key={uuidv4()} className="nutrient">
                                <span>{nutrient.name}</span>
                                <div className="progressbar">
                                    <div className="progress" style={{width: `${nutrient.percentage}%`, backgroundColor: (nutrient.percentage > 79) ? "#50B04E" : (nutrient.percentage < 30) ? "darkred" : "orange"}}></div>
                                </div>
                        </div>
                        })}
                    </div>
                </div>
                <div className="shadow-box">
                    <div className="emoji-text">
                        <svg width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.03354 18.2857C8.66458 18.2857 8.36667 17.9955 8.36667 17.6362C8.36667 17.5938 8.37125 17.5536 8.38042 17.5112C8.50187 17.0424 9.43917 14 13.5 14C17.5608 14 18.4981 17.0424 18.6196 17.5112C18.631 17.5536 18.6333 17.5938 18.6333 17.6362C18.6333 17.9955 18.3354 18.2857 17.9665 18.2857H9.03354ZM10.9333 16.1429C10.9333 16.0481 10.8947 15.9573 10.8259 15.8903C10.7572 15.8233 10.6639 15.7857 10.5667 15.7857C10.4694 15.7857 10.3762 15.8233 10.3074 15.8903C10.2386 15.9573 10.2 16.0481 10.2 16.1429C10.2 16.2376 10.2386 16.3284 10.3074 16.3954C10.3762 16.4624 10.4694 16.5 10.5667 16.5C10.6639 16.5 10.7572 16.4624 10.8259 16.3954C10.8947 16.3284 10.9333 16.2376 10.9333 16.1429ZM16.4333 16.5C16.5306 16.5 16.6238 16.4624 16.6926 16.3954C16.7614 16.3284 16.8 16.2376 16.8 16.1429C16.8 16.0481 16.7614 15.9573 16.6926 15.8903C16.6238 15.8233 16.5306 15.7857 16.4333 15.7857C16.3361 15.7857 16.2428 15.8233 16.1741 15.8903C16.1053 15.9573 16.0667 16.0481 16.0667 16.1429C16.0667 16.2376 16.1053 16.3284 16.1741 16.3954C16.2428 16.4624 16.3361 16.5 16.4333 16.5ZM13.8667 15.4286C13.8667 15.3339 13.828 15.243 13.7593 15.176C13.6905 15.1091 13.5972 15.0714 13.5 15.0714C13.4028 15.0714 13.3095 15.1091 13.2407 15.176C13.172 15.243 13.1333 15.3339 13.1333 15.4286C13.1333 15.5233 13.172 15.6141 13.2407 15.6811C13.3095 15.7481 13.4028 15.7857 13.5 15.7857C13.5972 15.7857 13.6905 15.7481 13.7593 15.6811C13.828 15.6141 13.8667 15.5233 13.8667 15.4286ZM8 20.0714C8 19.4799 8.49271 19 9.1 19H17.9C18.5073 19 19 19.4799 19 20.0714C19 20.6629 18.5073 21.1429 17.9 21.1429H9.1C8.49271 21.1429 8 20.6629 8 20.0714ZM8.36667 22.2143C8.36667 22.0179 8.53167 21.8571 8.73333 21.8571H18.2667C18.4683 21.8571 18.6333 22.0179 18.6333 22.2143V22.5714C18.6333 23.3594 17.9756 24 17.1667 24H9.83333C9.02438 24 8.36667 23.3594 8.36667 22.5714V22.2143Z" fill="#DA9759"/>
                            <path d="M18.4781 14.2965C20.1148 14.7332 21.8579 14.5017 23.324 13.6532C24.7901 12.8046 25.859 11.4084 26.2956 9.77169C26.7322 8.135 26.5008 6.39188 25.6523 4.92582C24.8037 3.45975 23.4075 2.39083 21.7708 1.95419C20.1341 1.51756 18.391 1.74898 16.9249 2.59755C15.4588 3.44613 14.3899 4.84233 13.9533 6.47903C13.5166 8.11573 13.7481 9.85884 14.5966 11.3249C15.4452 12.791 16.8414 13.8599 18.4781 14.2965ZM17.4621 9.20973C17.7605 9.82384 18.358 10.5461 19.4042 10.8252C20.4504 11.1044 21.3282 10.7756 21.8928 10.3917C22.0757 10.2675 22.3237 10.3156 22.4479 10.4985C22.5721 10.6814 22.5241 10.9294 22.3412 11.0536C21.639 11.5273 20.5266 11.951 19.1984 11.5966C17.8701 11.2423 17.1167 10.3209 16.7437 9.56033C16.647 9.36152 16.7288 9.12255 16.9276 9.02582C17.1264 8.92909 17.3654 9.01092 17.4621 9.20973ZM19.3737 7.22272L19.3702 7.21662C19.3666 7.21051 19.3637 7.20199 19.3591 7.19042C19.3498 7.16728 19.3334 7.13192 19.3134 7.09045C19.2712 7.00688 19.2112 6.89277 19.1338 6.77656C18.9718 6.53194 18.7706 6.31817 18.5561 6.26094C18.3415 6.2037 18.0606 6.28885 17.7983 6.42029C17.6733 6.48247 17.5645 6.55156 17.4862 6.60298C17.4483 6.62902 17.4164 6.65151 17.3968 6.66694C17.387 6.67465 17.3779 6.67995 17.3742 6.68413L17.3681 6.68767C17.2994 6.74166 17.2056 6.74502 17.1355 6.69793C17.0654 6.65083 17.0293 6.56372 17.0518 6.47935C17.1669 6.04785 17.4423 5.66426 17.7658 5.40973C18.0856 5.15937 18.4911 5.00417 18.8648 5.10385C19.2384 5.20353 19.5127 5.54009 19.6654 5.91649C19.8191 6.29836 19.8668 6.76812 19.7517 7.19962C19.7298 7.28158 19.6569 7.34216 19.5702 7.34746C19.4836 7.35275 19.4039 7.30308 19.3737 7.22272ZM23.2307 8.25168L23.2271 8.24557C23.2236 8.23947 23.2207 8.23095 23.2161 8.21938C23.2067 8.19623 23.1903 8.16088 23.1704 8.11941C23.1282 8.03583 23.0682 7.92172 22.9908 7.80552C22.8288 7.5609 22.6276 7.34713 22.4131 7.2899C22.1985 7.23266 21.9176 7.31781 21.6553 7.44924C21.5303 7.51143 21.4214 7.58052 21.3432 7.63194C21.3052 7.65797 21.2734 7.68047 21.2538 7.6959C21.244 7.70361 21.2348 7.70891 21.2312 7.71309L21.225 7.71662C21.1564 7.77062 21.0626 7.77398 20.9925 7.72689C20.9224 7.67979 20.8863 7.59268 20.9088 7.50831C21.0239 7.07681 21.2992 6.69322 21.6228 6.43868C21.9426 6.18833 22.3481 6.03312 22.7218 6.1328C23.0954 6.23248 23.3697 6.56904 23.5223 6.94545C23.6761 7.32731 23.7238 7.79708 23.6087 8.22858C23.5868 8.31054 23.5138 8.37112 23.4272 8.37642C23.3406 8.38171 23.2609 8.33204 23.2307 8.25168Z" fill="#50B04E"/>
                            <rect x="4" y="2" width="4" height="12" rx="2" fill="#AFAFAF"/>
                            <rect width="4" height="12" rx="2" transform="matrix(0 -1 -1 0 12 10)" fill="#AFAFAF"/>
                        </svg>
                        <h3>Foods to satify your nutrient needs</h3>
                    </div>
                    <div className="recommended-foods">
                        {foodRecommendations.map((food) => {
                            return <div key={uuidv4()} className="shadow-box food-card">
                                <img width={{width: "80%"}} src="/src/img/lemon.png" />
                                <span>{food.name}</span>
                                <div className="rich-in-container">
                                    {food.richIn.map(item => {
                                        return <span key={uuidv4()} className="rich-in">{item}</span>
                                    })}
                                </div>
                            </div>
                        })}
                    </div>
                </div>
                <div className="shadow-box recipe-box">
                    <div className="recipe-header">
                        <h3>Recommendations for your taste</h3>
                    </div>
                    <p>Based on your food preferences, we have put together a collection of recipes for you today</p>
                    <p>Check them out now {">>>"}</p>
                </div>

                <ArticlesContainer />
            </div>
            <NavBar />
        </>
    }
}